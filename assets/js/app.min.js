document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".site-navbar"),t=window.location.pathname.replace(/\/+$/,"")||"/",o=document.querySelectorAll("#mainNav a.nav-link, #mainNav .dropdown-item");let n=!1;o.forEach(e=>{const o=e.getAttribute("data-match");if(!o)return;const a=new RegExp(o,"i"),r=new URL(e.href,window.location.origin).pathname.replace(/\/+$/,"")||"/";if(a.test(t)||"/"!==r&&t.startsWith(r)){e.classList.add("active"),e.setAttribute("aria-current","page"),n=!0;const t=e.closest(".dropdown-menu")?.parentElement?.querySelector(".nav-link.dropdown-toggle");t&&(t.classList.add("active"),t.setAttribute("aria-current","page"))}}),n||"/"!==t&&!/index\.(html|php)$/i.test(t)||document.querySelectorAll('#mainNav a.nav-link[data-match^="^/$"]').forEach(e=>{e.classList.add("active"),e.setAttribute("aria-current","page")});let a=window.scrollY;const r=()=>{const t=window.scrollY;t>8?e.classList.add("scrolled"):e.classList.remove("scrolled"),t>a&&t>120?e.classList.add("nav-hide"):e.classList.remove("nav-hide"),a=t};window.addEventListener("scroll",r,{passive:!0}),r(),document.querySelectorAll(".dropdown").forEach(e=>{e.addEventListener("shown.bs.dropdown",()=>{e.querySelector(".dropdown-item")?.focus({preventScroll:!0})})}),document.addEventListener("keydown",e=>{if("Escape"===e.key){document.querySelectorAll(".dropdown-menu.show").forEach(e=>{const t=e.parentElement.querySelector('[data-bs-toggle="dropdown"]'),o=bootstrap.Dropdown.getInstance(t);o&&o.hide(),t?.focus({preventScroll:!0})});const e=document.getElementById("mainNav");if(e?.classList.contains("show")){bootstrap.Collapse.getOrCreateInstance(e).hide()}}});const s=()=>window.matchMedia("(hover:hover) and (pointer:fine) and (min-width: 992px)").matches;document.querySelectorAll(".dropdown-toggle").forEach(e=>{let t;e.addEventListener("mouseenter",()=>{s()&&(clearTimeout(t),bootstrap.Dropdown.getOrCreateInstance(e).show())}),e.parentElement.addEventListener("mouseleave",()=>{s()&&(t=setTimeout(()=>bootstrap.Dropdown.getOrCreateInstance(e).hide(),120))})})});